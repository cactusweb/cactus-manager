<div class="card" [class.card--disabled]="!method">
    <div class="card__head row">
        <span class="coin row">
            <img *ngIf="method" [src]="method.coin.image" alt="" class="coin__icon">
            <span class="coin__name">
                {{ method?.coin?.name }}
            </span>
        </span>
        <span>
            {{ method?.network }}
        </span>
    </div>
    <div class="row">
        <button class="btn" (click)="showAddressForm = true" >
            <svg xmlns="http://www.w3.org/2000/svg" width="19" height="20" viewBox="0 0 19 20" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M7.66635 0.835938C7.42324 0.835938 7.19008 0.932519 7.01817 1.10444C6.84626 1.27635 6.74969 1.50952 6.74969 1.75265V3.20289C6.11752 3.45896 5.52421 3.80207 4.98694 4.22227L3.73019 3.49623C3.51965 3.37468 3.26945 3.34173 3.03462 3.40465C2.7998 3.46758 2.59958 3.62121 2.47802 3.83175L0.644687 7.00724C0.523135 7.21779 0.490195 7.468 0.553113 7.70284C0.616031 7.93767 0.769654 8.1379 0.980188 8.25946L2.23602 8.98458C2.14201 9.66031 2.14201 10.3458 2.23602 11.0215L0.980188 11.7457C0.87582 11.8059 0.784343 11.8861 0.710986 11.9817C0.637629 12.0772 0.583833 12.1863 0.552673 12.3027C0.521513 12.4191 0.513601 12.5405 0.52939 12.66C0.545178 12.7794 0.584358 12.8946 0.644687 12.9989L2.47802 16.1743C2.59958 16.3849 2.7998 16.5385 3.03462 16.6014C3.26945 16.6644 3.51965 16.6314 3.73019 16.5099L4.98694 15.7838C5.51952 16.2009 6.1126 16.5447 6.74969 16.8032V18.2535C6.74969 18.4966 6.84626 18.7297 7.01817 18.9017C7.19008 19.0736 7.42324 19.1702 7.66635 19.1702H11.333C11.5761 19.1702 11.8093 19.0736 11.9812 18.9017C12.1531 18.7297 12.2497 18.4966 12.2497 18.2535V16.8032C12.8818 16.5471 13.4752 16.204 14.0124 15.7838L15.2692 16.5099C15.4797 16.6314 15.7299 16.6644 15.9648 16.6014C16.1996 16.5385 16.3998 16.3849 16.5214 16.1743L18.3547 12.9989C18.4762 12.7883 18.5092 12.5381 18.4463 12.3033C18.3833 12.0684 18.2297 11.8682 18.0192 11.7466L16.7634 11.0215C16.8574 10.3458 16.8574 9.66031 16.7634 8.98458L18.0192 8.26038C18.1236 8.20019 18.215 8.12001 18.2884 8.02443C18.3617 7.92885 18.4155 7.81975 18.4467 7.70336C18.4779 7.58698 18.4858 7.46559 18.47 7.34614C18.4542 7.22669 18.415 7.11153 18.3547 7.00724L16.5214 3.83175C16.3998 3.62121 16.1996 3.46758 15.9648 3.40465C15.7299 3.34173 15.4797 3.37468 15.2692 3.49623L14.0124 4.22227C13.4752 3.80208 12.8819 3.45897 12.2497 3.20289V1.75265C12.2497 1.50952 12.1531 1.27635 11.9812 1.10444C11.8093 0.932519 11.5761 0.835938 11.333 0.835938H7.66635ZM8.58302 3.85192V2.66936H10.4164V3.85192C10.4165 4.04937 10.4803 4.2415 10.5984 4.39974C10.7165 4.55798 10.8825 4.67385 11.0718 4.73013C11.8971 4.97662 12.6529 5.41373 13.2782 6.00619C13.4216 6.1421 13.6051 6.22803 13.8014 6.25115C13.9976 6.27428 14.1961 6.23337 14.3672 6.13453L15.392 5.54233L16.3087 7.13008L15.2848 7.72135C15.1139 7.82 14.9794 7.97113 14.9013 8.15231C14.8232 8.33348 14.8056 8.53502 14.8512 8.72699C15.0506 9.56601 15.0506 10.4401 14.8512 11.2791C14.8056 11.4711 14.8232 11.6726 14.9013 11.8538C14.9794 12.035 15.1139 12.1861 15.2848 12.2847L16.3087 12.876L15.392 14.4638L14.3663 13.8716C14.1953 13.7729 13.997 13.7322 13.8009 13.7553C13.6049 13.7784 13.4216 13.8642 13.2782 13.9999C12.653 14.5924 11.8971 15.0295 11.0718 15.276C10.8825 15.3322 10.7165 15.4481 10.5984 15.6064C10.4803 15.7646 10.4165 15.9567 10.4164 16.1542V17.3367H8.58302V16.1542C8.58292 15.9567 8.51907 15.7646 8.40097 15.6064C8.28288 15.4481 8.11686 15.3322 7.9276 15.276C7.10225 15.0295 6.34644 14.5924 5.72119 13.9999C5.57775 13.864 5.39423 13.7781 5.19799 13.7549C5.00175 13.7318 4.80329 13.7727 4.63219 13.8716L3.60735 14.4638L2.69069 12.876L3.7146 12.2847C3.88546 12.1861 4.01994 12.035 4.09806 11.8538C4.17617 11.6726 4.19375 11.4711 4.14819 11.2791C3.94879 10.4401 3.94879 9.56601 4.14819 8.72699C4.19375 8.53502 4.17617 8.33348 4.09806 8.15231C4.01994 7.97113 3.88546 7.82 3.7146 7.72135L2.69069 7.13008L3.60735 5.54233L4.63219 6.13453C4.80329 6.23337 5.00175 6.27428 5.19799 6.25115C5.39423 6.22803 5.57775 6.1421 5.72119 6.00619C6.34646 5.41373 7.10227 4.97662 7.9276 4.73013C8.11686 4.67385 8.28288 4.55798 8.40097 4.39974C8.51907 4.2415 8.58292 4.04937 8.58302 3.85192ZM7.66635 10.003C7.66635 9.5168 7.85951 9.05046 8.20333 8.70662C8.54714 8.36279 9.01346 8.16963 9.49969 8.16963C9.98592 8.16963 10.4522 8.36279 10.796 8.70662C11.1399 9.05046 11.333 9.5168 11.333 10.003C11.333 10.4893 11.1399 10.9556 10.796 11.2995C10.4522 11.6433 9.98592 11.8365 9.49969 11.8365C9.01346 11.8365 8.54714 11.6433 8.20333 11.2995C7.85951 10.9556 7.66635 10.4893 7.66635 10.003ZM9.49969 6.3362C8.52723 6.33621 7.5946 6.72253 6.90696 7.4102C6.21933 8.09787 5.83302 9.03054 5.83302 10.003C5.83302 10.9756 6.21933 11.9082 6.90696 12.5959C7.5946 13.2836 8.52723 13.6699 9.49969 13.6699C10.4721 13.6699 11.4048 13.2836 12.0924 12.5959C12.78 11.9082 13.1664 10.9756 13.1664 10.003C13.1664 9.03054 12.78 8.09787 12.0924 7.4102C11.4048 6.72253 10.4721 6.33621 9.49969 6.3362Z" fill="#78AFF8"/>
            </svg>
        </button>

        <app-checkbox-switcher
            [ngModel]="_val.enabled" 
            [i-id]="method? method.id+'-payment' : ''"
            (ngModelChange)="onStatusChange($event)"
        ></app-checkbox-switcher>
    </div>
</div>

<address-form *ngIf="showAddressForm && method" 
    [address]="_val.address" 
    [method]="method"
    (onSave)="onSaveAddress($event)"
    (onClose)="showAddressForm = false;"
></address-form>


<ngx-spinner *ngIf="!method"
    type="ball-clip-rotate"
    [fullScreen]="false"
    color="#78AFF8"
></ngx-spinner>